{% extends "base.html" %}

{% block content %}
<div class="row">
    <div class="col-12">
        <h1>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ—Ñ–µ-–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è</h1>
        <p class="text-muted">–î–∞–Ω–Ω—ã–µ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π</p>
    </div>
</div>

<div class="row mt-4">
    <!-- –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
    <div class="col-md-4">
        <div class="card text-white bg-primary mb-3">
            <div class="card-body">
                <h5 class="card-title">–í—Å–µ–≥–æ —á–∞—à–µ–∫</h5>
                <h2 class="card-text">{{ stats.total_stats[0] or 0 }}</h2>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card text-white bg-success mb-3">
            <div class="card-body">
                <h5 class="card-title">–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å</h5>
                <h2 class="card-text">{{ "%.2f"|format(stats.total_stats[1] or 0) }} ‚ÇΩ</h2>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card text-white bg-warning mb-3">
            <div class="card-body">
                <h5 class="card-title">–ö–æ—Ñ–µ–∏–Ω–∞ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–æ</h5>
                <h2 class="card-text">{{ stats.total_stats[2] or 0 }} –º–≥</h2>
            </div>
        </div>
    </div>
</div>

<div class="row mt-4">
    <!-- –¢–æ–ø –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π -->
    <div class="col-md-6">
        <div class="card">
            <div class="card-header">
                <h5>üèÜ –¢–æ–ø-5 –∫–æ—Ñ–µ–º–∞–Ω–æ–≤ –Ω–µ–¥–µ–ª–∏</h5>
            </div>
            <div class="card-body">
                {% if stats.top_consumers %}
                <table class="table">
                    <thead>
                        <tr>
                            <th>–°–æ—Ç—Ä—É–¥–Ω–∏–∫</th>
                            <th>–ß–∞—à–µ–∫</th>
                            <th>–°—Ç–æ–∏–º–æ—Å—Ç—å</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for name, count, cost in stats.top_consumers %}
                        <tr>
                            <td>{{ name }}</td>
                            <td>{{ count }}</td>
                            <td>{{ "%.2f"|format(cost) }} ‚ÇΩ</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
                {% else %}
                <p class="text-muted">–ü–æ–∫–∞ –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö –∑–∞ –Ω–µ–¥–µ–ª—é</p>
                {% endif %}
            </div>
        </div>
    </div>

    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –Ω–∞–ø–∏—Ç–∫–∞–º -->
    <div class="col-md-6">
        <div class="card">
            <div class="card-header">
                <h5>üìà –ü–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å –Ω–∞–ø–∏—Ç–∫–æ–≤</h5>
            </div>
            <div class="card-body">
                {% if stats.drink_stats %}
                <table class="table">
                    <thead>
                        <tr>
                            <th>–ù–∞–ø–∏—Ç–æ–∫</th>
                            <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for name, count in stats.drink_stats %}
                        <tr>
                            <td>{{ name }}</td>
                            <td>{{ count }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
                {% else %}
                <p class="text-muted">–ü–æ–∫–∞ –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö –∑–∞ –Ω–µ–¥–µ–ª—é</p>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
